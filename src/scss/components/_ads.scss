// ==========================================================================
// ARCHIVE ITEM COMPONENT STYLES (BLOG LIST)
// ==========================================================================

@use '../base/variables' as vars;
@use 'sass:color';

/* Styling for our responsive GAM ad containers */
.gam-responsive-banner-ad {
  display: block;
  margin: 25px auto; /* Adds space above/below and centers the ad */
  text-align: center;
  width: 100%;
}

// ==========================================================================
// STICKY SIDE RAIL AD STYLES (DESKTOP-ONLY)
// ==========================================================================

.side-rail-ad {
  /**
   * 1. Hide the ads by default on all screens.
   */
  display: none;

  /**
   * 2. Set the "hidden" animation state.
   * We make it invisible and slightly smaller.
   */
  opacity: 0;
  transform: scale(0.95);

  /**
   * 3. Define the animation.
   * This will smoothly animate the opacity and transform.
   */
  transition: opacity 0.3s ease-out, transform 0.3s ease-out;

  /**
   * 4. This is the new breakpoint.
   * MATH:
   * 1600px (Your content)
   * 160px (Left ad)
   * 160px (Right ad)
   * 40px (A 20px "safety" padding on the far edges)
   * = 1960px TOTAL
   *
   * We set the breakpoint to 1961px.
   */
  @media (min-width: 1919px) {
    display: block;
    position: fixed;
    top: 100px;   /* Adjust: 100px from the top of the window */
    width: 160px;
    height: 600px;
    z-index: 10;
  }
}

/**
 * 5. This is the "visible" state.
 * Our JavaScript will add this class on scroll.
 */
.side-rail-ad.is-visible {
  opacity: 1;
  transform: scale(1);
}

/**
 * 6. Positioning logic - centered in the gutter.
 * This positions the ads in the center of the empty space
 * that the main content leaves on wide screens.
 * 
 * FORMULA for centered in gutter:
 * (50% - 800px) = Width of one gutter
 * / 2 = Center of the gutter
 * - 80px = Half of the ad width (160px / 2)
 */
.side-rail-left {
  left: calc((50% - 800px) / 2 - 80px);
}

.side-rail-right {
  right: calc((50% - 800px) / 2 - 80px);
}

// ==========================================================================
// ANCHOR AD STYLES (BOTTOM STICKY AD)
// ==========================================================================

/* Custom CSS for the sliding transition */
#anchor-ad-wrapper {
  transition: transform 500ms ease-in-out;
  
  /* This class is added by JavaScript */
  &.is-closed {
    /* 100% of its own height. This will slide it completely off-screen. */
    transform: translateY(100%);
  }

  &.is-unfilled {
    display: none;
  }
}

#toggle-btn {
  /* Add transitions for size, position, and arrow rotation */
  transition: top 300ms ease-in-out, 
              height 300ms ease-in-out, 
              width 300ms ease-in-out, 
              padding 300ms ease-in-out;
}

#toggle-arrow {
  transition: transform 300ms ease-in-out, 
              height 300ms ease-in-out, 
              width 300ms ease-in-out;
  
  /* This class is also added by JavaScript */
  &.is-closed {
    transform: rotate(180deg);
  }
}

/* This new rule shrinks the button when the wrapper is closed */
#anchor-ad-wrapper.is-closed #toggle-btn {
  height: 1.25rem; /* h-5 (20px) */
  width: 3rem;     /* w-12 (48px) */
  top: -1.25rem;   /* -top-5 (positions it at the bottom, 20px high) */
  padding: 0.125rem; /* p-0.5 */
}

/* This new rule shrinks the arrow icon inside the smaller button */
#anchor-ad-wrapper.is-closed #toggle-arrow {
  height: 1rem; /* h-4 (16px) */
  width: 1rem;  /* w-4 (16px) */
}

/* Utility class to disable transitions during initial page load */
.no-transition {
  transition: none !important;
}

/* Helper text styles */
.ad-slot-text {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.875rem;
  font-weight: 500;
  color: #6b7280;
}