GEOTOUR THEME FILE STRUCTURE - UPDATED
========================================
Last Updated: June 2025
Project: Geotour Crete WordPress Theme Redevelopment

ROOT DIRECTORY: e:\visualstudio\geotour-theme\

COMPILED/GENERATED DIRECTORIES (Git Ignored):
â”œâ”€â”€ build/                          # Vite build output - compiled assets
â”œâ”€â”€ node_modules/                   # npm dependencies
â””â”€â”€ vendor/                         # Composer dependencies (if used)

SOURCE DIRECTORIES:
â”œâ”€â”€ src/                            # Source files for compilation
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ main.js                 # Main JS entry point (imports modules)
â”‚   â”‚   â”œâ”€â”€ modules/
â”‚   â”‚   â”‚   â”œâ”€â”€ navigation/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ main.js         # Main menu JS logic
â”‚   â”‚   â”‚   â”œâ”€â”€ header/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ main.js         # Header functionality and animations
â”‚   â”‚   â”‚   â”œâ”€â”€ hero/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ main.js         # Hero section interactions, scroll effects, clickable scroll indicator
â”‚   â”‚   â”‚   â”œâ”€â”€ gallery/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ main.js         # Image gallery with Fancybox lightbox
â”‚   â”‚   â”‚   â”œâ”€â”€ maps/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ main.js         # Leaflet map initialization for single listings
â”‚   â”‚   â”‚   â””â”€â”€ big-map/            # Full-screen map UI (listing archive page)
â”‚   â”‚   â”‚       â””â”€â”€ main.js         # Big map with sidebar for spatial navigation
â”‚   â”‚   â””â”€â”€ homepage/               # Homepage-specific modules
â”‚   â”‚       â””â”€â”€ search-form.js      # Homepage search form functionality
â”‚   â””â”€â”€ scss/
â”‚       â”œâ”€â”€ main.scss               # Main SCSS entry point with all imports
â”‚       â”œâ”€â”€ base/                   # Foundation styles
â”‚       â”‚   â”œâ”€â”€ _variables.scss     # SCSS variables and colors
â”‚       â”‚   â”œâ”€â”€ _animations.scss    # Animation utilities
â”‚       â”‚   â””â”€â”€ _typography.scss    # Typography styles (Syne font system)
â”‚       â”œâ”€â”€ components/             # Reusable UI components
â”‚       â”‚   â”œâ”€â”€ _hero.scss          # Hero section styles (general + listing-specific)
â”‚       â”‚   â”œâ”€â”€ _content.scss       # Content components (articles, posts, archive grid)
â”‚       â”‚   â”œâ”€â”€ _maps.scss          # Single listing map styles (100vw layout)
â”‚       â”‚   â”œâ”€â”€ _big-map.scss       # Full-screen map UI styles (archive page)
â”‚       â”‚   â”œâ”€â”€ _virtualtour.scss   # Virtual tour widget component styles
â”‚       â”‚   â”œâ”€â”€ _gallery.scss       # Image gallery component styles with masonry layout
â”‚       â”‚   â”œâ”€â”€ _listing-details.scss # Listing details sections styles (3-column responsive layout)
â”‚       â”‚   â””â”€â”€ _contact-form.scss  # Contact Form 7 modern styling with validation states
â”‚       â”œâ”€â”€ layout/
â”‚       â”‚   â”œâ”€â”€ navigation/
â”‚       â”‚   â”‚   â””â”€â”€ _main.scss      # Main menu SCSS with Virtual Tour/3D Map icons
â”‚       â”‚   â”œâ”€â”€ header/
â”‚       â”‚   â”‚   â””â”€â”€ _main.scss      # Main header SCSS with clip-path design
â”‚       â”‚   â”œâ”€â”€ content/
â”‚       â”‚   â”‚   â””â”€â”€ _main.scss      # Main content layout, responsive grid, navigation
â”‚       â”‚   â”œâ”€â”€ listing/            # Listing-specific layout styles
â”‚       â”‚   â”‚   â””â”€â”€ _overthecontent.scss # Over-the-content area styles for listings
â”‚       â”‚   â””â”€â”€ footer/
â”‚       â”‚       â””â”€â”€ _footer-modern.scss # Modern footer styles
â”‚       â””â”€â”€ pages/                  # Page-specific styles
â”‚           â””â”€â”€ _homepage.scss      # Homepage fullscreen hero and search form

WORDPRESS THEME STRUCTURE:
â”œâ”€â”€ style.css                       # WordPress theme header (required)
â”œâ”€â”€ index.php                       # Main template fallback
â”œâ”€â”€ functions.php                   # Main functions (loader only)
â”œâ”€â”€ header.php                      # Site header with SVG clip-path and hero integration
â”œâ”€â”€ footer.php                      # Site footer template
â”œâ”€â”€ single.php                      # Single post template
â”œâ”€â”€ page.php                        # Static page template
â”œâ”€â”€ page-homepage.php               # Homepage template with fullscreen hero + search
â”œâ”€â”€ page-listing.php                # Full-screen listing map page (archive replacement)
â”œâ”€â”€ archive.php                     # Archive template with grid layout
â”œâ”€â”€ 404.php                         # Error page template
â”œâ”€â”€ search.php                      # Search results template
â””â”€â”€ assets/                         # Static assets directory
    â””â”€â”€ map-pins/                   # Custom SVG map pin icons for different listing types

=== SINGLE LISTING PAGE STRUCTURE (MOST IMPORTANT) - UPDATED ===

MAIN TEMPLATE:
â”œâ”€â”€ single-listing.php              # ğŸ¯ MAIN ENTRY POINT for single listings

TEMPLATE PARTS (called in order) - CORRECT MAPPING:
â”œâ”€â”€ template-parts/listing/
â”‚   â”œâ”€â”€ hero-listing.php            # ğŸ”ï¸ .listing-hero-section - Title, listing-category, listing-region links, scroll arrow
â”‚   â”œâ”€â”€ map-single.php              # ğŸ—ºï¸ .listing-map-full-section - 100vw: "About this Location" excerpt + position map (NOT just map!)
â”‚   â”œâ”€â”€ details-sections.php        # ğŸ“‹ .listing-details-full-section - 100vw details grid layout âš ï¸ NEEDS ATTENTION
â”‚   â”œâ”€â”€ map-custom.php              # ğŸ¯ .listing-custom-map-section - 100vw ACF shortcode map (NEW ADDITION)
â”‚   â””â”€â”€ content-listing-single.php  # ğŸ“„ .main-container - Centered content: .listing-content + .virtual-tour-section + .nearest-listings

SINGLE LISTING LAYOUT ORDER (Top to Bottom):
1. .listing-hero-section            â†’ hero-listing.php
   - Title with listing-category and listing-region links
   - Links format: /listing/?listing-category=archaeological-site
   - Scroll down arrow for UX
   
2. .listing-about-full-section      â†’ map-single.php  
   - 100vw section with excerpt overlay + position map
   - "About this Location" long summary (NOT just a map!)
   - Map shows listing's geographical position
   - NO category/region links (moved to hero)
   
3. .listing-details-full-section    â†’ details-sections.php âš ï¸ FOCUS HERE
   - 100vw grid layout for access info, contacts, weather
   - Responsive grid with category-specific content
   - NEEDS IMMEDIATE ATTENTION
   
4. .listing-custom-map-section      â†’ map-custom.php (NEW)
   - 100vw section controlled by ACF 'listing_map' field
   - Processes shortcode: [geotour_map map_id="15703" ...]
   - Only visible if field contains valid shortcode
   
5. .main-container                  â†’ content-listing-single.php
   - max-width: 1400px, centered content
   - .listing-content (main article text)
   - .virtual-tour-section (VR tour block)  
   - .nearest-listings (related listings shortcode from plugin)

LAYOUT CHARACTERISTICS:
â”œâ”€â”€ Full-width sections (100vw):
â”‚   â”œâ”€â”€ .listing-map-full-section     # Excerpt + map
â”‚   â”œâ”€â”€ .listing-details-full-section # Grid details âš ï¸
â”‚   â””â”€â”€ .listing-custom-map-section   # ACF shortcode map
â”œâ”€â”€ Centered content (.main-container):
â”‚   â”œâ”€â”€ max-width: 1400px
â”‚   â”œâ”€â”€ margin: 0 auto
â”‚   â””â”€â”€ padding: responsive
â”œâ”€â”€ Grid layouts:
â”‚   â”œâ”€â”€ .details-grid (responsive CSS Grid)
â”‚   â””â”€â”€ .listings-grid (CSS Grid with minmax())
â””â”€â”€ Mobile-first approach with responsive breakpoints

PRIORITY FOCUS: 
ğŸ“‹ .listing-details-full-section (details-sections.php) needs grid layout implementation

ARCHIVE LISTING PAGE (Full-screen map):
â”œâ”€â”€ page-listing.php                # Full-screen map with sidebar
â”œâ”€â”€ src/js/modules/big-map/main.js  # Big map UI with AJAX loading
â”œâ”€â”€ src/scss/components/_big-map.scss # Full-screen map styles
â””â”€â”€ includes/api/spatial-info-v2.php # REST API for map data

TEMPLATE PARTS (General):
â”œâ”€â”€ template-parts/                 # Modular template components
â”‚   â”œâ”€â”€ hero.php                    # General hero section (not used for listings)
â”‚   â”œâ”€â”€ content-main.php            # Main content wrapper with archive grid support
â”‚   â”œâ”€â”€ content-single.php          # Single post/page content (not listings)
â”‚   â”œâ”€â”€ content.php                 # Archive loop content with card styling
â”‚   â”œâ”€â”€ content-none.php            # No content found template with search form
â”‚   â”œâ”€â”€ listing/                    # ğŸ“ LISTING-SPECIFIC TEMPLATE PARTS
â”‚   â”‚   â”œâ”€â”€ content-listing-single.php # Main content for single listing
â”‚   â”‚   â”œâ”€â”€ content-listing-archive.php # Listing card for archive loops
â”‚   â”‚   â”œâ”€â”€ hero-listing.php        # Dedicated hero section for listings
â”‚   â”‚   â”œâ”€â”€ map-single.php          # Single listing map (100vw layout)
â”‚   â”‚   â”œâ”€â”€ details-sections.php    # Site access & category-based details (100vw)
â”‚   â”‚   â”œâ”€â”€ map-archive.php         # Archive map for listing loops (NOT USED - replaced by page-listing.php)
â”‚   â”‚   â””â”€â”€ related-listings.php    # Related listings grid
â”‚   â””â”€â”€ footer/
â”‚       â””â”€â”€ modern.php              # Modern footer template

CUSTOM TEMPLATES (Legacy/Unused):
â”œâ”€â”€ templates/                      # âš ï¸ DEPRECATED - should be moved to root
â”‚   â”œâ”€â”€ single-listing.php          # âŒ OLD - use root single-listing.php instead
â”‚   â””â”€â”€ archive-listing.php         # âŒ OLD - replaced by page-listing.php

PHP INCLUDES STRUCTURE:
â”œâ”€â”€ includes/                       # Organized PHP functionality
â”‚   â”œâ”€â”€ theme-support.php           # Theme setup, menus, image sizes
â”‚   â”œâ”€â”€ scripts-styles.php          # Asset enqueuing with Vite manifest
â”‚   â”œâ”€â”€ utils.php                   # Utility functions (coordinates, GeoJSON, post meta helpers)
â”‚   â”œâ”€â”€ navigation.php              # Navigation walkers and helpers
â”‚   â”œâ”€â”€ legacy-shortcodes.php       # BoldThemes shortcode replacements
â”‚   â”œâ”€â”€ listing-map-routes.php      # Custom /listing route handler
â”‚   â”œâ”€â”€ listing-taxonomy-redirects.php # Redirect taxonomy archives to map
â”‚   â”œâ”€â”€ maps/                       # Map functionality
â”‚   â”‚   â””â”€â”€ icon-management.php     # Category-based map icon system
â”‚   â”œâ”€â”€ shortcodes/                 # Modern shortcode implementations
â”‚   â”‚   â””â”€â”€ content-gallery.php     # Image gallery shortcode replacement
â”‚   â”œâ”€â”€ custom-post-types/
â”‚   â”‚   â””â”€â”€ listing.php             # Listing CPT and taxonomies registration
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ spatial-info-v2.php     # REST API for listing map data
â”‚       â”œâ”€â”€ custom-listing-endpoints.php # Custom REST API endpoints for listings (panotours/v1, geotour/v1 selector)
â”‚       â””â”€â”€ nearest-listings-endpoint.php # Nearest listings API with ACF position support (panotours/v1/nearest)

BUILD CONFIGURATION:
â”œâ”€â”€ package.json                    # npm configuration with Vite scripts
â”œâ”€â”€ vite.config.js                  # Vite bundler configuration
â”œâ”€â”€ postcss.config.js               # PostCSS configuration (autoprefixer)
â”œâ”€â”€ .gitignore                      # Git ignore rules
â””â”€â”€ notes.txt                       # Project documentation and plans

ğŸ¯ RECOMMENDATIONS FOR BETTER ORGANIZATION:

1. MOVE templates/ files to root directory
2. CREATE dedicated includes/listing/ folder for all listing-related PHP
3. CONSOLIDATE all listing styles into src/scss/pages/_single-listing.scss
4. CREATE src/js/pages/single-listing.js for all listing-specific JavaScript
5. REMOVE unused/deprecated files

PRIORITY: Single listing page is the most important - focus organization efforts there first.
