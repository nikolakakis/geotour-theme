GEOTOUR THEME FILE STRUCTURE - UPDATED
========================================
Last Updated: December 2024
Project: Geotour Crete WordPress Theme Redevelopment

ROOT DIRECTORY: e:\visualstudio\geotour-theme\

COMPILED/GENERATED DIRECTORIES (Git Ignored):
â”œâ”€â”€ build/                          # Vite build output - compiled assets
â”œâ”€â”€ node_modules/                   # npm dependencies
â””â”€â”€ vendor/                         # Composer dependencies (if used)

SOURCE DIRECTORIES:
â”œâ”€â”€ src/                            # Source files for compilation
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ main.js                 # Main JS entry point (imports modules)
â”‚   â”‚   â”œâ”€â”€ modules/
â”‚   â”‚   â”‚   â”œâ”€â”€ navigation/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ main.js         # Main menu JS logic
â”‚   â”‚   â”‚   â”œâ”€â”€ header/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ main.js         # Header functionality and animations
â”‚   â”‚   â”‚   â”œâ”€â”€ hero/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ main.js         # Hero section interactions, scroll effects, clickable scroll indicator
â”‚   â”‚   â”‚   â”œâ”€â”€ gallery/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ main.js         # Image gallery with Fancybox lightbox
â”‚   â”‚   â”‚   â”œâ”€â”€ maps/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ main.js         # Leaflet map initialization for single listings
â”‚   â”‚   â”‚   â””â”€â”€ big-map/            # Full-screen map UI (listing archive page)
â”‚   â”‚   â”‚       â””â”€â”€ main.js         # Big map with sidebar for spatial navigation
â”‚   â”‚   â””â”€â”€ homepage/               # Homepage-specific modules
â”‚   â”‚       â””â”€â”€ search-form.js      # Homepage search form functionality
â”‚   â””â”€â”€ scss/
â”‚       â”œâ”€â”€ main.scss               # Main SCSS entry point with all imports
â”‚       â”œâ”€â”€ base/                   # Foundation styles
â”‚       â”‚   â”œâ”€â”€ _variables.scss     # SCSS variables and colors
â”‚       â”‚   â”œâ”€â”€ _animations.scss    # Animation utilities
â”‚       â”‚   â””â”€â”€ _typography.scss    # Typography styles (Syne font system)
â”‚       â”œâ”€â”€ components/             # Reusable UI components
â”‚       â”‚   â”œâ”€â”€ _hero.scss          # Hero section styles (general + listing-specific)
â”‚       â”‚   â”œâ”€â”€ _content.scss       # Content components (articles, posts, archive grid)
â”‚       â”‚   â”œâ”€â”€ _maps.scss          # Single listing map styles (100vw layout)
â”‚       â”‚   â”œâ”€â”€ _big-map.scss       # Full-screen map UI styles (archive page)
â”‚       â”‚   â”œâ”€â”€ _virtualtour.scss   # Virtual tour widget component styles
â”‚       â”‚   â”œâ”€â”€ _gallery.scss       # Image gallery component styles with masonry layout
â”‚       â”‚   â”œâ”€â”€ _listing-details.scss # Listing details sections styles (3-column responsive layout)
â”‚       â”‚   â”œâ”€â”€ _contact-form.scss  # Contact Form 7 modern styling with validation states
â”‚       â”‚   â””â”€â”€ _homepage.scss      # Homepage fullscreen hero and search form
â”‚       â”œâ”€â”€ layout/
â”‚       â”‚   â”œâ”€â”€ navigation/
â”‚       â”‚   â”‚   â””â”€â”€ _main.scss      # Main menu SCSS with Virtual Tour/3D Map icons
â”‚       â”‚   â”œâ”€â”€ header/
â”‚       â”‚   â”‚   â””â”€â”€ _main.scss      # Main header SCSS with clip-path design
â”‚       â”‚   â”œâ”€â”€ content/
â”‚       â”‚   â”‚   â””â”€â”€ _main.scss      # Main content layout, responsive grid, navigation
â”‚       â”‚   â”œâ”€â”€ listing/            # Listing-specific layout styles
â”‚       â”‚   â”‚   â””â”€â”€ _overthecontent.scss # Over-the-content area styles for listings
â”‚       â”‚   â””â”€â”€ footer/
â”‚       â”‚       â””â”€â”€ _footer-modern.scss # Modern footer styles
â”‚       â””â”€â”€ pages/                  # Page-specific styles (future use)

WORDPRESS THEME STRUCTURE:
â”œâ”€â”€ style.css                       # WordPress theme header (required)
â”œâ”€â”€ index.php                       # Main template fallback
â”œâ”€â”€ functions.php                   # Main functions (loader only)
â”œâ”€â”€ header.php                      # Site header with SVG clip-path and hero integration
â”œâ”€â”€ footer.php                      # Site footer template
â”œâ”€â”€ single.php                      # Single post template
â”œâ”€â”€ page.php                        # Static page template
â”œâ”€â”€ page-homepage.php               # Homepage template with fullscreen hero + search
â”œâ”€â”€ page-listing.php                # Full-screen listing map page (archive replacement)
â”œâ”€â”€ archive.php                     # Archive template with grid layout
â”œâ”€â”€ 404.php                         # Error page template
â”œâ”€â”€ search.php                      # Search results template
â””â”€â”€ assets/                         # Static assets directory
    â””â”€â”€ map-pins/                   # Custom SVG map pin icons for different listing types

=== SINGLE LISTING PAGE STRUCTURE (MOST IMPORTANT) ===

MAIN TEMPLATE:
â”œâ”€â”€ single-listing.php              # ğŸ¯ MAIN ENTRY POINT for single listings

TEMPLATE PARTS (called in order) - CORRECTED MAPPING:
â”œâ”€â”€ template-parts/listing/
â”‚   â”œâ”€â”€ hero-listing.php            # ğŸ”ï¸ .listing-hero-section - Header with title, listing-category, listing-region links, scroll arrow
â”‚   â”œâ”€â”€ map-single.php              # ğŸ—ºï¸ .listing-map-full-section - 100vw section with "About this Location" excerpt + map (NOT just a map!)
â”‚   â”œâ”€â”€ details-sections.php        # ğŸ“‹ .listing-details-full-section - 100vw details grid layout âš ï¸ NEEDS ATTENTION
â”‚   â””â”€â”€ content-listing-single.php  # ğŸ“„ .main-container - Centered content: .listing-content + .virtual-tour-section + .nearest-listings

RELATED STYLES:
â”œâ”€â”€ src/scss/components/
â”‚   â”œâ”€â”€ _hero.scss                  # .listing-hero-section styles
â”‚   â”œâ”€â”€ _content.scss               # .listing-single, .listing-wide-content styles
â”‚   â”œâ”€â”€ _maps.scss                  # .listing-map-full-section styles
â”‚   â”œâ”€â”€ _listing-details.scss       # .listing-details-full-section styles
â”‚   â”œâ”€â”€ _virtualtour.scss           # Virtual tour widget styles
â”‚   â””â”€â”€ _gallery.scss               # Image gallery styles for listing images
â””â”€â”€ src/scss/layout/listing/
    â””â”€â”€ _overthecontent.scss        # .listing-excerpt-section, .nearest-listings-full-section

JAVASCRIPT MODULES:
â”œâ”€â”€ src/js/modules/
â”‚   â”œâ”€â”€ maps/main.js                # Leaflet map initialization for single listing
â”‚   â”œâ”€â”€ gallery/main.js             # Fancybox for listing image galleries
â”‚   â””â”€â”€ hero/main.js                # Hero interactions and scroll effects

PHP FUNCTIONS:
â”œâ”€â”€ includes/
â”‚   â”œâ”€â”€ maps/icon-management.php    # geotour_get_listing_map_icon() - category-based icons
â”‚   â”œâ”€â”€ utils.php                   # geotour_get_taxonomy_listing_url() - taxonomy links
â”‚   â”œâ”€â”€ legacy-shortcodes.php       # Shortcode replacements for old content
â”‚   â””â”€â”€ custom-post-types/listing.php # Listing CPT registration

=== END SINGLE LISTING STRUCTURE ===

ARCHIVE LISTING PAGE (Full-screen map):
â”œâ”€â”€ page-listing.php                # Full-screen map with sidebar
â”œâ”€â”€ src/js/modules/big-map/main.js  # Big map UI with AJAX loading
â”œâ”€â”€ src/scss/components/_big-map.scss # Full-screen map styles
â””â”€â”€ includes/api/spatial-info-v2.php # REST API for map data

TEMPLATE PARTS (General):
â”œâ”€â”€ template-parts/                 # Modular template components
â”‚   â”œâ”€â”€ hero.php                    # General hero section (not used for listings)
â”‚   â”œâ”€â”€ content-main.php            # Main content wrapper with archive grid support
â”‚   â”œâ”€â”€ content-single.php          # Single post/page content (not listings)
â”‚   â”œâ”€â”€ content.php                 # Archive loop content with card styling
â”‚   â”œâ”€â”€ content-none.php            # No content found template with search form
â”‚   â”œâ”€â”€ listing/                    # ğŸ“ LISTING-SPECIFIC TEMPLATE PARTS
â”‚   â”‚   â”œâ”€â”€ content-listing-single.php # Main content for single listing
â”‚   â”‚   â”œâ”€â”€ content-listing-archive.php # Listing card for archive loops
â”‚   â”‚   â”œâ”€â”€ hero-listing.php        # Dedicated hero section for listings
â”‚   â”‚   â”œâ”€â”€ map-single.php          # Single listing map (100vw layout)
â”‚   â”‚   â”œâ”€â”€ details-sections.php    # Site access & category-based details (100vw)
â”‚   â”‚   â”œâ”€â”€ map-archive.php         # Archive map for listing loops (NOT USED - replaced by page-listing.php)
â”‚   â”‚   â””â”€â”€ related-listings.php    # Related listings grid
â”‚   â””â”€â”€ footer/
â”‚       â””â”€â”€ modern.php              # Modern footer template

CUSTOM TEMPLATES (Legacy/Unused):
â”œâ”€â”€ templates/                      # âš ï¸ DEPRECATED - should be moved to root
â”‚   â”œâ”€â”€ single-listing.php          # âŒ OLD - use root single-listing.php instead
â”‚   â””â”€â”€ archive-listing.php         # âŒ OLD - replaced by page-listing.php

PHP INCLUDES STRUCTURE:
â”œâ”€â”€ includes/                       # Organized PHP functionality
â”‚   â”œâ”€â”€ theme-support.php           # Theme setup, menus, image sizes
â”‚   â”œâ”€â”€ scripts-styles.php          # Asset enqueuing with Vite manifest
â”‚   â”œâ”€â”€ utils.php                   # Utility functions (coordinates, GeoJSON, post meta helpers)
â”‚   â”œâ”€â”€ navigation.php              # Navigation walkers and helpers
â”‚   â”œâ”€â”€ legacy-shortcodes.php       # BoldThemes shortcode replacements
â”‚   â”œâ”€â”€ listing-map-routes.php      # Custom /listing route handler
â”‚   â”œâ”€â”€ listing-taxonomy-redirects.php # Redirect taxonomy archives to map
â”‚   â”œâ”€â”€ maps/                       # Map functionality
â”‚   â”‚   â””â”€â”€ icon-management.php     # Category-based map icon system
â”‚   â”œâ”€â”€ shortcodes/                 # Modern shortcode implementations
â”‚   â”‚   â””â”€â”€ content-gallery.php     # Image gallery shortcode replacement
â”‚   â”œâ”€â”€ custom-post-types/
â”‚   â”‚   â””â”€â”€ listing.php             # Listing CPT and taxonomies registration
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ spatial-info-v2.php     # REST API for listing map data
â”‚       â””â”€â”€ custom-listing-endpoints.php # Custom REST API endpoints for listings (panotours/v1, geotour/v1 selector)

BUILD CONFIGURATION:
â”œâ”€â”€ package.json                    # npm configuration with Vite scripts
â”œâ”€â”€ vite.config.js                  # Vite bundler configuration
â”œâ”€â”€ postcss.config.js               # PostCSS configuration (autoprefixer)
â”œâ”€â”€ .gitignore                      # Git ignore rules
â””â”€â”€ notes.txt                       # Project documentation and plans

ğŸ¯ RECOMMENDATIONS FOR BETTER ORGANIZATION:

1. MOVE templates/ files to root directory
2. CREATE dedicated includes/listing/ folder for all listing-related PHP
3. CONSOLIDATE all listing styles into src/scss/pages/_single-listing.scss
4. CREATE src/js/pages/single-listing.js for all listing-specific JavaScript
5. REMOVE unused/deprecated files

PRIORITY: Single listing page is the most important - focus organization efforts there first.
